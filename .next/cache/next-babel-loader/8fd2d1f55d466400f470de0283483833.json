{"ast":null,"code":"import { createStore, combineReducers } from 'redux';\nimport { persistStore, persistReducer } from 'redux-persist';\nimport DefaultStorage from 'redux-persist/lib/storage';\nimport userReducer from '../reducers/user';\nimport CustomCookieStorage from '../../utils/helpers/customCookieStorage';\nimport dataReducer from '../reducers/data';\nexport function initializeStore(req, res) {\n  // pass to server\n  var persistCookieConfig = function persistCookieConfig(key) {\n    return {\n      key: key,\n      storage: CustomCookieStorage(req, res)\n    };\n  }; // used in client local storage\n\n\n  var persistLocalConfig = function persistLocalConfig(key) {\n    return {\n      key: key,\n      storage: DefaultStorage\n    };\n  };\n\n  var rootReducers = combineReducers({\n    user: userReducer,\n    dataCookie: dataReducer\n  });\n  var localConfigReducer = persistReducer(persistLocalConfig, combineReducers({\n    dataLocal: dataReducer\n  }));\n  var store = createStore();\n  var persistor = persistStore(store, {});\n  return {\n    store: store,\n    persistor: persistor\n  };\n}","map":{"version":3,"sources":["/Users/raghavahuja/playground/next_ts/src/redux/config/index.ts"],"names":["createStore","combineReducers","persistStore","persistReducer","DefaultStorage","userReducer","CustomCookieStorage","dataReducer","initializeStore","req","res","persistCookieConfig","key","storage","persistLocalConfig","rootReducers","user","dataCookie","localConfigReducer","dataLocal","store","persistor"],"mappings":"AAAA,SAASA,WAAT,EAAsBC,eAAtB,QAAoD,OAApD;AACA,SAASC,YAAT,EAAkCC,cAAlC,QAAgF,eAAhF;AACA,OAAOC,cAAP,MAA2B,2BAA3B;AACA,OAAOC,WAAP,MAAkC,kBAAlC;AAGA,OAAOC,mBAAP,MAAgC,yCAAhC;AACA,OAAOC,WAAP,MAAkC,kBAAlC;AAUA,OAAO,SAASC,eAAT,CAAyBC,GAAzB,EAAoCC,GAApC,EAAuF;AAG5F;AACA,MAAMC,mBAAmB,GAAG,SAAtBA,mBAAsB,CAACC,GAAD;AAAA,WAAkB;AAC5CA,MAAAA,GAAG,EAAHA,GAD4C;AAE5CC,MAAAA,OAAO,EAAEP,mBAAmB,CAACG,GAAD,EAAMC,GAAN;AAFgB,KAAlB;AAAA,GAA5B,CAJ4F,CAU5F;;;AACA,MAAMI,kBAAkB,GAAG,SAArBA,kBAAqB,CAACF,GAAD;AAAA,WAAkB;AAC3CA,MAAAA,GAAG,EAAHA,GAD2C;AAE3CC,MAAAA,OAAO,EAAET;AAFkC,KAAlB;AAAA,GAA3B;;AAKA,MAAMW,YAAY,GAAGd,eAAe,CAClC;AACEe,IAAAA,IAAI,EAAEX,WADR;AAEEY,IAAAA,UAAU,EAAEV;AAFd,GADkC,CAApC;AAQA,MAAMW,kBAAkB,GAAGf,cAAc,CACvCW,kBADuC,EAEvCb,eAAe,CAAC;AACdkB,IAAAA,SAAS,EAAEZ;AADG,GAAD,CAFwB,CAAzC;AAOA,MAAMa,KAAY,GAAGpB,WAAW,EAAhC;AAIA,MAAMqB,SAAS,GAAGnB,YAAY,CAACkB,KAAD,EAAQ,EAAR,CAA9B;AAEA,SAAO;AAAEA,IAAAA,KAAK,EAALA,KAAF;AAASC,IAAAA,SAAS,EAATA;AAAT,GAAP;AACD","sourcesContent":["import { createStore, combineReducers, Store } from 'redux'\nimport { persistStore, Persistor, persistReducer, persistCombineReducers } from 'redux-persist'\nimport DefaultStorage from 'redux-persist/lib/storage'\nimport userReducer, { User } from '../reducers/user';\n\nimport ActionTypes from './types';\nimport CustomCookieStorage from '../../utils/helpers/customCookieStorage';\nimport dataReducer, { Data } from '../reducers/data';\n\nexport interface StoreState {\n  user: User,\n  dataLocal: Data,\n  dataCookie: Data\n}\n\nexport type CustomReducer<T> = (state: T, action: { type: ActionTypes, payload: any }) => T\n\nexport function initializeStore(req?: any, res?: any): { store: Store, persistor: Persistor } {\n\n\n  // pass to server\n  const persistCookieConfig = (key: string) => ({\n    key,\n    storage: CustomCookieStorage(req, res)\n  })\n\n\n  // used in client local storage\n  const persistLocalConfig = (key: string) => ({\n    key,\n    storage: DefaultStorage\n  })\n\n  const rootReducers = combineReducers(\n    {\n      user: userReducer,\n      dataCookie: dataReducer\n    }\n\n  )\n\n  const localConfigReducer = persistReducer(\n    persistLocalConfig,\n    combineReducers({\n      dataLocal: dataReducer,\n    })\n  )\n\n  const store: Store = createStore(\n    // combineReducers<StoreState>({ user: userReducer })\n\n  )\n  const persistor = persistStore(store, {})\n\n  return { store, persistor }\n}\n\n"]},"metadata":{},"sourceType":"module"}