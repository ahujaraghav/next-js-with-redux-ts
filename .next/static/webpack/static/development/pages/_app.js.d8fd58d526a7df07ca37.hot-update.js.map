{"version":3,"file":"static/webpack/static/development/pages/_app.js.d8fd58d526a7df07ca37.hot-update.js","sources":["webpack:///./src/redux/config/index.ts"],"sourcesContent":["import { createStore, combineReducers, Store } from 'redux'\nimport { persistStore, Persistor, persistReducer, persistCombineReducers } from 'redux-persist'\nimport DefaultStorage from 'redux-persist/lib/storage'\nimport userReducer, { User } from '../reducers/user';\n\nimport ActionTypes from './types';\nimport CustomCookieStorage from '../../utils/helpers/customCookieStorage';\nimport dataReducer, { Data } from '../reducers/data';\n\nexport interface StoreState {\n  user: User,\n  dataLocal: Data,\n  dataCookie: Data\n}\n\nexport type CustomReducer<T> = (state: T, action: { type: ActionTypes, payload: any }) => T\n\nexport function initializeStore(req?: any, res?: any): { store: Store, persistor: Persistor } {\n\n\n  // pass to server\n  const persistCookieConfig = (key: string) => ({\n    key,\n    storage: CustomCookieStorage(req, res)\n  })\n\n\n  // used in client local storage\n  const persistLocalConfig = (key: string) => ({\n    key,\n    storage: DefaultStorage\n  })\n\n  const rootReducers = combineReducers(\n    {\n      user: persistReducer(persistCookieConfig('user'), userReducer),\n      dataCookie:  persistReducer(persistCookieConfig('data') , dataReducer),\n      dataLocal: persistReducer(persistLocalConfig('data-local') , dataReducer),\n    }\n\n  )\n\n  \n\n  const store: Store = createStore(\n    // combineReducers<StoreState>({ user: userReducer })\n    rootReducers\n  )\n  const persistor = persistStore(store, {})\n\n  return { store, persistor }\n}\n\n"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAGA;AACA;AAUA;AAGA;AACA;AAAA;AACA;AACA;AAFA;AAAA;AACA;AACA;AAKA;AAAA;AACA;AACA;AAFA;AAAA;AACA;AAIA;AAEA;AACA;AACA;AAHA;AAUA;AAEA;AAEA;AAEA;AAAA;AAAA;AAAA;AACA;;;;A","sourceRoot":""}